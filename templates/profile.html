<!DOCTYPE html>
<link rel="stylesheet" href="/stylesheets/profile.css">

<div id="navbar">
  <ul>
    <li id="logo">ROFL</li>
    <li><a href="/potentialroomies">Home</a></li>
    <li id="floatRight">
        <a href={{logout_url}}>Log out</a>
    </li>
    <li id="floatRight"><a href="/profile?key={{current_person.key.urlsafe()}}">My Profile</a></li>
    <li id="floatRight"><a href="/mymatches">My Matches</a></li>
  </ul>
</div>

<title>Profile Page for {{person.name}}</title>

<div id="content">
  <div>
    <img class="image" src="/photo?key={{person.key.urlsafe()}}" alt="Image not found">
  </div>
  <div id="right">
    <h1 class="info" id="name">{{person.name}}</h1>
    {% if is_my_profile %}
      <button id="edit" style="float:right" name="Edit">Edit Profile</button>
      <form action="/edit" method="post">
        <div id="myModal" class="modal">
          <div class="modal-content">
            <span class="close">&times;</span>
            <form action="/create" method="post">
              <br>
              <label>Name:</label>
              <input name="name" value="{{current_person.name}}"><br>
              <br>
              <label>Gender:</label>
              <select id="gender" name="gender">
                <option value="Female">Female</option>
                <option value="Male">Male</option>
                <option value="Other">Other</option>
              </select>
              <br>
              <br>
              <label>College:</label>
              <input name="college" value="{{current_person.college}}"><br>
              <br>
              <label>Year</label>
              <select id="year" name="year">
                <option value="Freshman">Freshman</option>
                <option value="Sophomore">Sophomore</option>
                <option value="Junior">Junior</option>
                <option value="Senior">Senior</option>
              </select>
              <br><br>
              <label>City</label>
              <input name="city" value="{{current_person.city}}"><br>
              <br>
              <label>State</label>
              <select name="state">
              	<option value="AL">Alabama</option>
              	<option value="AK">Alaska</option>
              	<option value="AZ">Arizona</option>
              	<option value="AR">Arkansas</option>
              	<option value="CA">California</option>
              	<option value="CO">Colorado</option>
              	<option value="CT">Connecticut</option>
              	<option value="DE">Delaware</option>
              	<option value="DC">District Of Columbia</option>
              	<option value="FL">Florida</option>
              	<option value="GA">Georgia</option>
              	<option value="HI">Hawaii</option>
              	<option value="ID">Idaho</option>
              	<option value="IL">Illinois</option>
              	<option value="IN">Indiana</option>
              	<option value="IA">Iowa</option>
              	<option value="KS">Kansas</option>
              	<option value="KY">Kentucky</option>
              	<option value="LA">Louisiana</option>
              	<option value="ME">Maine</option>
              	<option value="MD">Maryland</option>
              	<option value="MA">Massachusetts</option>
              	<option value="MI">Michigan</option>
              	<option value="MN">Minnesota</option>
              	<option value="MS">Mississippi</option>
              	<option value="MO">Missouri</option>
              	<option value="MT">Montana</option>
              	<option value="NE">Nebraska</option>
              	<option value="NV">Nevada</option>
              	<option value="NH">New Hampshire</option>
              	<option value="NJ">New Jersey</option>
              	<option value="NM">New Mexico</option>
              	<option value="NY">New York</option>
              	<option value="NC">North Carolina</option>
              	<option value="ND">North Dakota</option>
              	<option value="OH">Ohio</option>
              	<option value="OK">Oklahoma</option>
              	<option value="OR">Oregon</option>
              	<option value="PA">Pennsylvania</option>
              	<option value="RI">Rhode Island</option>
              	<option value="SC">South Carolina</option>
              	<option value="SD">South Dakota</option>
              	<option value="TN">Tennessee</option>
              	<option value="TX">Texas</option>
              	<option value="UT">Utah</option>
              	<option value="VT">Vermont</option>
              	<option value="VA">Virginia</option>
              	<option value="WA">Washington</option>
              	<option value="WV">West Virginia</option>
              	<option value="WI">Wisconsin</option>
              	<option value="WY">Wyoming</option>
              </select>
              <br><br>
              <label>Short Bio</label>
              <input name="bio" value="{{current_person.bio}}"><br><br>
              <button>Save changes</button>
            </form>
          </div>
        </div>
      </form>
    {% else %}
      <form action="/profile" method="post">
        <input type="hidden" name="viewed_profile_key" value="{{person.key.urlsafe()}}">
        <button style="float:right" name="like">Like</button></h1>
      </form>
    {% endif %}

    <div class="info">Gender: {{person.gender}}</div>
    <div class="info">Year: {{person.year}}</div>
    <div class="info">College: {{person.college}}</div>
    <div class="info">{{person.city}}, {{person.state}}</div>
    <div class="info">About me: {{person.bio}}</div>
    <div class="info">Smoking: {{person.smoke}}</div>
    <div class="info">Favorite hobby: {{person.hobbies}}</div>

    {% if is_my_profile %}
      <div class="info" style="display:block;">Email: {{person.email}}</div>
    {% elif person in matches %}
      <p><strong>Congratulations! This is a mutual match. Contact info: </strong></p>
      <div class="info" style="display:block;">Email: {{person.email}}</div>
    {% else %}
      <div class="info" style="display:none;">Email: {{person.email}}</div>
    {% endif %}
  </div>
</div>

{% if is_my_profile %}
  <form id="upload" action="/upload_photo" method="post" enctype="multipart/form-data">
      Upload a profile photo: <input name="image" type="file"><br>
      <button>Upload</button>
  </form>
  <br><br><br>
{% endif %}


<!-- <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyCLJddXystpgO4qnhwmfgG8JzI4Yd4TOPY",
    authDomain: "rofl-cssi.firebaseapp.com",
    databaseURL: "https://rofl-cssi.firebaseio.com",
    projectId: "rofl-cssi",
    storageBucket: "rofl-cssi.appspot.com",
    messagingSenderId: "803516191779"
  };
  firebase.initializeApp(config);
</script> -->

<script src="/javascript/profile.js"></script>
