<!DOCTYPE html>
<link rel="stylesheet" href="/stylesheets/profile.css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display" rel="stylesheet">

<div id="navbar">
  <ul>
    <li id="logo">ROFL</li>
    <li><a href="/potentialroomies">Home</a></li>
    <li><a href="/about">About Us</a></li>
    <li id="floatRight">
        <a href={{logout_url}}>Log out</a>
    </li>
    <li id="floatRight"><a href="/profile?key={{current_person.key.urlsafe()}}">My Profile</a></li>
    <li id="floatRight"><a href="/mymatches">My Matches</a></li>
  </ul>
</div>

<title>Profile Page for {{person.name}}</title>

<div id="content">
  {% if person in matches %}
     <div>
       <img class="image" id="matchedRoomiesItem" src="/photo?key={{person.key.urlsafe()}}" alt="Image not found">
     </div>
   {% elif person in people_likes_person %}
     <div>
       <img class="image" id="likedRoomiesItem" src="/photo?key={{person.key.urlsafe()}}" alt="Image not found">
     </div>
   {% elif person in people_person_likes %}
     <div>
       <img class="image" id="likeRoomiesItem" src="/photo?key={{person.key.urlsafe()}}" alt="Image not found">
     </div>
   {% elif is_my_profile %}
     <div>
       <img class="image" id="myItem" src="/photo?key={{person.key.urlsafe()}}" alt="Image not found">
     </div>
    {% else %}
    <div>
      <img class="image" src="/photo?key={{person.key.urlsafe()}}" alt="Image not found">
    </div>
   {% endif %}

  <div id="left">
    <h1 class="info" id="name">{{person.name}}</h1>
    <div class="info">{{person.gender}}</div>
    <br>
    <div class="info">{{person.year}} at {{person.college}}</div>
    <div class="info">{{person.city}}, {{person.state}}</div>
    <div class="info">Bio: {{person.bio}}</div>
    <br><br><br>
    {% if is_my_profile %}
      <button id="edit" style="float:left" name="Edit">Edit Profile</button>
      <form action="/edit" method="post">
        <div id="myModal" class="modal">
          <div class="modal-content">
            <span class="close">&times;</span>
            <form action="/create" method="post">
              <br>
              <label>Name:</label>
              <input name="name" value="{{current_person.name}}" maxlength="20"><br>
              <br>
              <label>Gender:</label>
              <select id="gender" name="gender">
                <option value="Female">Female</option>
                <option value="Male">Male</option>
                <option value="Other">Other</option>
              </select>
              <br>
              <br>
              <label>College:</label>
              <input name="college" value="{{current_person.college}}" maxlength="50"><br>
              <br>
              <label>Year</label>
              <select id="year" name="year">
                <option value="Freshman">Freshman</option>
                <option value="Sophomore">Sophomore</option>
                <option value="Junior">Junior</option>
                <option value="Senior">Senior</option>
              </select>
              <br><br>
              <label>City</label>
              <input name="city" value="{{current_person.city}}" maxlength="30"><br>
              <br>
              <label>State</label>
              <select id="state" name="state">
              	<option value="AL">Alabama</option>
              	<option value="AK">Alaska</option>
              	<option value="AZ">Arizona</option>
              	<option value="AR">Arkansas</option>
              	<option value="CA">California</option>
              	<option value="CO">Colorado</option>
              	<option value="CT">Connecticut</option>
              	<option value="DE">Delaware</option>
              	<option value="DC">District Of Columbia</option>
              	<option value="FL">Florida</option>
              	<option value="GA">Georgia</option>
              	<option value="HI">Hawaii</option>
              	<option value="ID">Idaho</option>
              	<option value="IL">Illinois</option>
              	<option value="IN">Indiana</option>
              	<option value="IA">Iowa</option>
              	<option value="KS">Kansas</option>
              	<option value="KY">Kentucky</option>
              	<option value="LA">Louisiana</option>
              	<option value="ME">Maine</option>
              	<option value="MD">Maryland</option>
              	<option value="MA">Massachusetts</option>
              	<option value="MI">Michigan</option>
              	<option value="MN">Minnesota</option>
              	<option value="MS">Mississippi</option>
              	<option value="MO">Missouri</option>
              	<option value="MT">Montana</option>
              	<option value="NE">Nebraska</option>
              	<option value="NV">Nevada</option>
              	<option value="NH">New Hampshire</option>
              	<option value="NJ">New Jersey</option>
              	<option value="NM">New Mexico</option>
              	<option value="NY">New York</option>
              	<option value="NC">North Carolina</option>
              	<option value="ND">North Dakota</option>
              	<option value="OH">Ohio</option>
              	<option value="OK">Oklahoma</option>
              	<option value="OR">Oregon</option>
              	<option value="PA">Pennsylvania</option>
              	<option value="RI">Rhode Island</option>
              	<option value="SC">South Carolina</option>
              	<option value="SD">South Dakota</option>
              	<option value="TN">Tennessee</option>
              	<option value="TX">Texas</option>
              	<option value="UT">Utah</option>
              	<option value="VT">Vermont</option>
              	<option value="VA">Virginia</option>
              	<option value="WA">Washington</option>
              	<option value="WV">West Virginia</option>
              	<option value="WI">Wisconsin</option>
              	<option value="WY">Wyoming</option>
              </select>
              <br><br>
              <label>Do you smoke regularly? </label>
              <select id="smoke" name="smoke">
                <option value="No">No</option>
                <option value="Yes">Yes</option>
              </select>
              <label>Select your favorite hobby: </label>
              <select id="hobbies" name="hobbies">
                <option value="Sports">Sports</option>
                <option value="Art">Arts</option>
                <option value="Coding">Coding</option>
                <option value="Watching Netflix">Watching Netflix</option>
                <option value="Being with friends and family">Being with friends and family</option>
              </select>
              <br><br>
              <label>Short Bio</label>
              <input name="bio" value="{{current_person.bio}}" maxlength="150"><br><br>
              <button>Save changes</button>
            </form>
          </div>
        </div>
      </form>
    {% else %}
      <form action="/profile" method="post">
        <input type="hidden" name="viewed_profile_key" value="{{person.key.urlsafe()}}">
        <button style="float:left" name="like" id="like">Like</button>
      </form>
    {% endif %}
    <br>
  </div>
  <div id="right">
    <div class="info" id="aboutme">ABOUT ME</div>
    <div class="info">Smoking: {{person.smoke}}</div>
    <div class="info">Favorite hobby: {{person.hobbies}}</div>
    {% if is_my_profile %}
      <div class="info" style="display:block;">Email: {{person.email}}</div>
    {% elif person in matches %}
      <p><strong>Congratulations! This is a mutual match. Contact info: </strong></p>
      <div class="info" style="display:block;">Email: {{person.email}}</div>
    {% else %}
      <div class="info" style="display:none;">Email: {{person.email}}</div>
    {% endif %}
  </div>
</div>

{% if is_my_profile %}
  <form id="upload" action="/upload_photo" method="post" enctype="multipart/form-data">
      Upload profile photo: <input id="imgUpload" name="image" type="file"><br><br>
      <button id="uploadBtn">Upload</button>
  </form>
  <br><br><br>
{% endif %}

<div id="cheatCode">
  <div class="gender">{{person.gender}}</div>
  <div class="year">{{person.year}}</div>
  <div class="state">{{person.state}}</div>
  <div class="smoke">{{person.smoke}}</div>
  <div class="hobbies">{{person.hobbies}}</div>

</div>

<script src="/javascript/profile.js"></script>
